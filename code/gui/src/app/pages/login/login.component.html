<mat-card>
  <mat-card-title>Login</mat-card-title>
  <mat-card-content>
    <div>
      <form [formGroup]="form" (ngSubmit)="submit()">
        <p>
          <mat-form-field>
            <input type="text" matInput placeholder="Username" formControlName="username">
          </mat-form-field>
        </p>

        <p>
          <mat-form-field>
            <input type="password" matInput placeholder="Password" formControlName="password">
          </mat-form-field>
        </p>

        <p *ngIf="error" class="error">
          {{ error }}
        </p>

        <div class="button">
          <button type="submit" mat-raised-button color="primary" [disabled]="form.invalid">Login</button>
        </div>
      </form>

      <!--      TODO Vedere perchÃ¨ cambia dimensione quando clicchi sull'anchor-->
      <br>
      <mat-divider></mat-divider>
      <br>
      <a (click)="showSignup()">Not registered? Click here and get an account now!</a>
      <div *ngIf="visible">
        <h4>Select type of user</h4>
        <mat-form-field>
          <mat-label>Type</mat-label>
          <mat-select  [(value)]="role" required>
            <mat-option value="CASE">Case</mat-option>
            <mat-option value="CONTROL">Control</mat-option>
            <mat-option value="DOCTOR">Doctor</mat-option>
          </mat-select>
        </mat-form-field>
        <div class="button">
          <button mat-raised-button color="accent" (click)="signup()">Sign up</button>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>

<ng-template #successDialog>
  <h2 matDialogTitle>Registration successful!</h2>
  <div matDialogContent>
    Your data are:
    <ul>
      <li><b>Username</b>: {{ newUser.username }}</li>
      <li><b>Password</b>: {{ newUser.password }}</li>
    </ul>

    You should write them down or download and store them with the following button.
  </div>
  <mat-dialog-actions align="end">
    <button mat-raised-button color="accent" (click)="generatePDF()">
      <mat-icon>arrow_downward</mat-icon>
      <span>Download as PDF</span>
     </button>
    <button mat-raised-button color="primary" matDialogClose (click)="submit()">
      <mat-icon>keyboard_arrow_right</mat-icon>
      <span>Login</span>
    </button>
  </mat-dialog-actions>
</ng-template>
